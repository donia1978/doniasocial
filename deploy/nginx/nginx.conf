server {
  listen 80;
  server_name _;

  root /usr/share/nginx/html;
  index index.html;

  # SPA routing
  location / {
    try_files \ \/ /index.html;
  }

  # AI proxy (internal service)
  location /api/ai/deepseek {
    proxy_pass http://ai-proxy:8787/api/ai/deepseek;
    proxy_http_version 1.1;
    proxy_set_header Host \System.Management.Automation.Internal.Host.InternalHost;
    proxy_set_header X-Real-IP \;
  }

  # Security headers (baseline)
  add_header X-Content-Type-Options nosniff always;
  add_header X-Frame-Options DENY always;
  add_header Referrer-Policy no-referrer always;
}
